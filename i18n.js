const messages = {
    'en-US': {
        'loadFailed': 'Failed to load repositories',
        'noRepos': 'No repositories found',
        'notGitHub': 'This is not a GitHub page',
        'invalidPage': 'Invalid GitHub page',
        'loadError': 'Error loading repositories',
        'noDescription': 'No description',
        'unstarredRepos': 'Unstarred Repositories',
        'searchPlaceholder': 'Search repositories...',
        'starPrompt': 'Like this extension? Give it a'
    },
    'en-GB': {
        'loadFailed': 'Failed to load repositories',
        'noRepos': 'No repositories found',
        'notGitHub': 'This is not a GitHub page',
        'invalidPage': 'Invalid GitHub page',
        'loadError': 'Error loading repositories',
        'noDescription': 'No description',
        'unstarredRepos': 'Unstarred Repositories',
        'searchPlaceholder': 'Search repositories...',
        'starPrompt': 'Like this extension? Give it a'
    },
    'zh-CN': {
        'loadFailed': '加载仓库失败',
        'noRepos': '未找到仓库',
        'notGitHub': '这不是 GitHub 页面',
        'invalidPage': '无效的 GitHub 页面',
        'loadError': '加载仓库时出错',
        'noDescription': '暂无描述',
        'unstarredRepos': '未获得 Star 的仓库',
        'searchPlaceholder': '搜索仓库...',
        'starPrompt': '喜欢这个扩展？给个'
    },
    'zh-TW': {
        'loadFailed': '載入儲存庫失敗',
        'noRepos': '未找到儲存庫',
        'notGitHub': '這不是 GitHub 頁面',
        'invalidPage': '無效的 GitHub 頁面',
        'loadError': '載入儲存庫時出錯',
        'noDescription': '暫無描述',
        'unstarredRepos': '未獲得 Star 的儲存庫',
        'searchPlaceholder': '搜尋儲存庫...',
        'starPrompt': '喜歡這個擴充功能？給個'
    },
    'zh-HK': {
        'loadFailed': '載入儲存庫失敗',
        'noRepos': '未找到儲存庫',
        'notGitHub': '這不是 GitHub 頁面',
        'invalidPage': '無效的 GitHub 頁面',
        'loadError': '載入儲存庫時出錯',
        'noDescription': '暫無描述',
        'unstarredRepos': '未獲得 Star 的儲存庫',
        'searchPlaceholder': '搜尋儲存庫...',
        'starPrompt': '喜歡這個擴充功能？給個'
    },
    'ja-JP': {
        'loadFailed': 'リポジトリの読み込みに失敗しました',
        'noRepos': 'リポジトリが見つかりません',
        'notGitHub': 'これはGitHubページではありません',
        'invalidPage': '無効なGitHubページです',
        'loadError': 'リポジトリの読み込みエラー',
        'noDescription': '説明なし',
        'unstarredRepos': 'スターのないリポジトリ',
        'searchPlaceholder': 'リポジトリを検索...',
        'starPrompt': 'この拡張機能が気に入りましたか？'
    },
    'ko-KR': {
        'loadFailed': '저장소 로드 실패',
        'noRepos': '저장소를 찾을 수 없습니다',
        'notGitHub': 'GitHub 페이지가 아닙니다',
        'invalidPage': '잘못된 GitHub 페이지입니다',
        'loadError': '저장소 로드 오류',
        'noDescription': '설명 없음',
        'unstarredRepos': '스타 없는 저장소',
        'searchPlaceholder': '저장소 검색...',
        'starPrompt': '이 확장 프로그램이 마음에 드시나요?'
    },
    'fr-FR': {
        'loadFailed': 'Échec du chargement des dépôts',
        'noRepos': 'Aucun dépôt trouvé',
        'notGitHub': "Ce n'est pas une page GitHub",
        'invalidPage': 'Page GitHub invalide',
        'loadError': 'Erreur de chargement des dépôts',
        'noDescription': 'Aucune description',
        'unstarredRepos': 'Dépôts sans étoile',
        'searchPlaceholder': 'Rechercher des dépôts...',
        'starPrompt': 'Vous aimez cette extension ? Donnez une'
    },
    'de-DE': {
        'loadFailed': 'Repositories konnten nicht geladen werden',
        'noRepos': 'Keine Repositories gefunden',
        'notGitHub': 'Dies ist keine GitHub-Seite',
        'invalidPage': 'Ungültige GitHub-Seite',
        'loadError': 'Fehler beim Laden der Repositories',
        'noDescription': 'Keine Beschreibung',
        'unstarredRepos': 'Repositories ohne Stern',
        'searchPlaceholder': 'Repositories durchsuchen...',
        'starPrompt': 'Gefällt dir diese Erweiterung? Gib einen'
    },
    'es-ES': {
        'loadFailed': 'Error al cargar los repositorios',
        'noRepos': 'No se encontraron repositorios',
        'notGitHub': 'Esta no es una página de GitHub',
        'invalidPage': 'Página de GitHub inválida',
        'loadError': 'Error al cargar repositorios',
        'noDescription': 'Sin descripción',
        'unstarredRepos': 'Repositorios sin estrella',
        'searchPlaceholder': 'Buscar repositorios...',
        'starPrompt': '¿Te gusta esta extensión? Dale una'
    },
    'pt-BR': {
        'loadFailed': 'Falha ao carregar repositórios',
        'noRepos': 'Nenhum repositório encontrado',
        'notGitHub': 'Esta não é uma página do GitHub',
        'invalidPage': 'Página do GitHub inválida',
        'loadError': 'Erro ao carregar repositórios',
        'noDescription': 'Sem descrição',
        'unstarredRepos': 'Repositórios sem estrela',
        'searchPlaceholder': 'Pesquisar repositórios...',
        'starPrompt': 'Gosta desta extensão? Dê uma'
    },
    'pt-PT': {
        'loadFailed': 'Falha ao carregar repositórios',
        'noRepos': 'Nenhum repositório encontrado',
        'notGitHub': 'Esta não é uma página do GitHub',
        'invalidPage': 'Página do GitHub inválida',
        'loadError': 'Erro ao carregar repositórios',
        'noDescription': 'Sem descrição',
        'unstarredRepos': 'Repositórios sem estrela',
        'searchPlaceholder': 'Pesquisar repositórios...',
        'starPrompt': 'Gosta desta extensão? Dê uma'
    },
    'ru-RU': {
        'loadFailed': 'Не удалось загрузить репозитории',
        'noRepos': 'Репозитории не найдены',
        'notGitHub': 'Это не страница GitHub',
        'invalidPage': 'Недействительная страница GitHub',
        'loadError': 'Ошибка загрузки репозиториев',
        'noDescription': 'Нет описания',
        'unstarredRepos': 'Репозитории без звезд',
        'searchPlaceholder': 'Поиск репозиториев...',
        'starPrompt': 'Нравится расширение? Поставьте'
    },
    'it-IT': {
        'loadFailed': 'Impossibile caricare i repository',
        'noRepos': 'Nessun repository trovato',
        'notGitHub': 'Questa non è una pagina GitHub',
        'invalidPage': 'Pagina GitHub non valida',
        'loadError': 'Errore durante il caricamento dei repository',
        'noDescription': 'Nessuna descrizione',
        'unstarredRepos': 'Repository senza stelle',
        'searchPlaceholder': 'Cerca repository...',
        'starPrompt': 'Ti piace questa estensione? Dai una'
    },
    'nl-NL': {
        'loadFailed': 'Kan repositories niet laden',
        'noRepos': 'Geen repositories gevonden',
        'notGitHub': 'Dit is geen GitHub-pagina',
        'invalidPage': 'Ongeldige GitHub-pagina',
        'loadError': 'Fout bij laden repositories',
        'noDescription': 'Geen beschrijving',
        'unstarredRepos': 'Repositories zonder ster',
        'searchPlaceholder': 'Zoek repositories...',
        'starPrompt': 'Vind je deze extensie leuk? Geef een'
    },
    'pl-PL': {
        'loadFailed': 'Nie udało się załadować repozytoriów',
        'noRepos': 'Nie znaleziono repozytoriów',
        'notGitHub': 'To nie jest strona GitHub',
        'invalidPage': 'Nieprawidłowa strona GitHub',
        'loadError': 'Błąd ładowania repozytoriów',
        'noDescription': 'Brak opisu',
        'unstarredRepos': 'Repozytoria bez gwiazdki',
        'searchPlaceholder': 'Szukaj repozytoriów...',
        'starPrompt': 'Podoba Ci się to rozszerzenie? Daj'
    }
};

export function t(key) {
    const lang = navigator.language;
    const shortLang = lang.split('-')[0];
    
    // 尝试完全匹配，然后是标准化的语言代码匹配，最后是英语
    const translations = messages[lang] || 
                        messages[`${shortLang}-${shortLang.toUpperCase()}`] || 
                        messages['en-US'];
    return translations[key] || messages['en-US'][key] || key;
}